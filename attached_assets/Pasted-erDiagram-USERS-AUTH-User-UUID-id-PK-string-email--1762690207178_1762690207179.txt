erDiagram

    %% ===== USERS & AUTH =====
    User {
        UUID id PK
        string email
        string password
        string full_name
        string role "user/admin"
        datetime created_at
        datetime last_login
    }

    Session {
        UUID id PK
        UUID user_id FK
        string auth_token
        datetime created_at
        datetime expires_atf
    }

    %% ===== CORE ENTITIES =====
    City {
        UUID id PK
        string name
        string country
        string region
    }

    Airport {
        string code PK
        string name
        UUID city_id FK
    }

    %% ===== FLIGHT DATA =====
    Flight {
        UUID id PK
        string flight_number
        string airline_name
        string aircraft_model
        string origin_code FK
        string destination_code FK
        datetime departure_time
        datetime arrival_time
        decimal base_price
    }

    %% ===== HOTELS =====
    Hotel {
        UUID id PK
        string name
        UUID city_id FK
        string address
        float rating
        string contact_number
        string description
    }

    Room {
        UUID id PK
        UUID hotel_id FK
        string room_type "single, double, suite"
        int capacity
        decimal price_per_night
    }

    %% ===== CARS =====
    Car {
        UUID id PK
        UUID city_id FK
        string model
        string brand
        int year
        int seats
        string transmission "manual/automatic"
        string fuel_type
        decimal price_per_day
    }

    %% ===== BOOKINGS =====
    Booking {
        UUID id PK
        UUID user_id FK
        string status "pending, confirmed, cancelled"
        datetime booked_at
        decimal total_price
    }

    FlightBooking {
        UUID id PK
        UUID booking_id FK
        UUID flight_id FK
        string seat_class "economy, business"
        int passengers
    }

    HotelBooking {
        UUID id PK
        UUID booking_id FK
        UUID room_id FK
        date check_in
        date check_out
        int guests
    }

    CarBooking {
        UUID id PK
        UUID booking_id FK
        UUID car_id FK
        datetime pickup_time
        datetime dropoff_time
        string pickup_location
        string dropoff_location
    }

    Passenger {
        UUID id PK
        UUID booking_id FK
        string first_name
        string last_name
        string gender
        date dob
        string passport_no
    }

    Payment {
        UUID id PK
        UUID booking_id FK
        string method "card, wallet, upi, etc."
        decimal amount
        datetime paid_at
        string status "success, failed, refunded"
        string transaction_ref
    }

    %% ===== RELATIONSHIPS =====
    User ||--o{ Session : "has"
    User ||--o{ Booking : "creates"

    Booking ||--|| Payment : "paid by"
    Booking ||--o| FlightBooking : "can include"
    Booking ||--o| HotelBooking : "can include"
    Booking ||--o| CarBooking : "can include"
    Booking ||--o{ Passenger : "for travelers"

    FlightBooking ||--|| Flight : "for"
    HotelBooking ||--|| Room : "for"
    Room ||--|| Hotel : "belongs to"
    Hotel ||--|| City : "located in"

    CarBooking ||--|| Car : "for"
    Car ||--|| City : "available in"

    Flight ||--|| Airport : "origin"
    Flight ||--|| Airport : "destination"
    Airport ||--|| City : "located in"
